<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">

<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Gioco ðŸ”º</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #111;
  color: white;
  font-family: Arial, sans-serif;
  touch-action: manipulation;
}

#game {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 20px;
}

/* SHOP + CUSTOMIZE */
.panel {
  background: #222;
  padding: 12px;
  border-radius: 10px;
  width: 200px;
}

.panel button {
  width: 100%;
  margin-top: 6px;
  padding: 8px;
  border-radius: 6px;
  border: none;
}

/* TRIANGOLO */
#triangle {
  position: relative;
  width: 0;
  height: 0;
  border-left: 60px solid transparent;
  border-right: 60px solid transparent;
  border-bottom: 120px solid cyan;
  user-select: none;
  -webkit-user-select: none;
}

/* ACCESSORI */
.accessory {
  position: absolute;
  display: none;
  pointer-events: none;
}

#hat {
  top: -40px;
  left: -22px;
  font-size: 32px;
}

#glasses {
  top: 40px;
  left: -18px;
  font-size: 26px;
}

#vest {
  top: 70px;
  left: -22px;
  font-size: 30px;
}

/* INFO */
#info {
  position: fixed;
  top: 10px;
  right: 10px;
  background: #222;
  padding: 10px;
  border-radius: 10px;
  font-size: 14px;
}
</style>
</head>

<body>

<div id="game">

  <!-- SHOP -->
  <div class="panel">
    <h3>ðŸ›’ Shop</h3>
    <p>ðŸ’° Soldi: <span id="money">0 / 500</span></p>

    <button onclick="buyCoins()">+1 moneta / click (10ðŸ’°)</button>
    <button onclick="buyPoints()">+1 punto / click (20ðŸ’°)</button>
  </div>

  <!-- TRIANGOLO -->
  <div id="triangle">
    <div id="hat" class="accessory">ðŸŽ©</div>
    <div id="glasses" class="accessory">ðŸ˜Ž</div>
    <div id="vest" class="accessory">ðŸ¦º</div>
  </div>

  <!-- CUSTOMIZE -->
  <div class="panel">
    <h3>ðŸŽ¨ Customize</h3>
    <button onclick="toggleAccessory('hat')">Cappello</button>
    <button onclick="toggleAccessory('glasses')">Occhiali</button>
    <button onclick="toggleAccessory('vest')">Gilet</button>
  </div>

</div>

<div id="info">
  Punti: <span id="points">0 / 1000</span><br>
  Rinascite: <span id="rebirths">0</span><br>
  VelocitÃ : <span id="speed">1.0</span><br>
  Prossima rinascita: <span id="goal">50</span>
</div>

<script>
/* ===== STATO ===== */
let size = 120;

let points = 0;
const maxPoints = 1000;

let rebirths = 0;
let speed = 1;

let rebirthGoal = 50;
const maxRebirthGoal = 1000;

let money = 0;
const maxMoney = 500;

let coinsPerClick = 1;
let pointsPerClick = 1;

const triangle = document.getElementById("triangle");

const colors = ["cyan", "yellow", "lime", "red", "orange", "pink", "violet"];

/* TRIANGOLO */
function updateTriangle() {
  triangle.style.borderLeft = (size / 2) + "px solid transparent";
  triangle.style.borderRight = (size / 2) + "px solid transparent";
  triangle.style.borderBottom =
    size + "px solid " + colors[Math.floor(Math.random() * colors.length)];
}

/* CLICK */
triangle.addEventListener("touchstart", clickTriangle);
triangle.addEventListener("click", clickTriangle);

function clickTriangle(e) {
  e.preventDefault();

  if (points < maxPoints) {
    points += pointsPerClick;
    if (points > maxPoints) points = maxPoints;
  }

  if (money < maxMoney) {
    money += coinsPerClick;
    if (money > maxMoney) money = maxMoney;
  }

  size += speed;
  updateTriangle();

  if (points >= rebirthGoal) rebirth();

  updateUI();
}

/* RINASCITA */
function rebirth() {
  points = 0;
  size = 120;
  rebirths++;
  speed += 0.5;

  rebirthGoal *= 2;
  if (rebirthGoal > maxRebirthGoal) rebirthGoal = maxRebirthGoal;
}

/* SHOP */
function buyCoins() {
  if (money >= 10) {
    money -= 10;
    coinsPerClick++;
  }
}

function buyPoints() {
  if (money >= 20) {
    money -= 20;
    pointsPerClick++;
  }
}

/* CUSTOMIZE */
function toggleAccessory(id) {
  const el = document.getElementById(id);
  el.style.display = el.style.display === "block" ? "none" : "block";
}

/* UI */
function updateUI() {
  document.getElementById("points").textContent = points + " / " + maxPoints;
  document.getElementById("rebirths").textContent = rebirths;
  document.getElementById("speed").textContent = speed.toFixed(1);
  document.getElementById("goal").textContent = rebirthGoal;
  document.getElementById("money").textContent = money + " / " + maxMoney;
}

/* START */
updateTriangle();
updateUI();
</script>

</body>
</html>
